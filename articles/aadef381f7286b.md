---
title: "Flutter×Firebaseでリファレンスの配列データを取得する方法"
emoji: "🐧"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Flutter", "Firebase"]
published: false
---

StatefulWidget の中でいつものようにデータを引っ張ってくる

```flutter
Future<Map<String, dynamic>> myBook() async {
    final snapshot = await FirebaseFirestore.instance.collection('users').get();
    final document = snapshot.docs.first.data();
    return document;
  }


  List<Map<String, dynamic>> mapBookmark = [];

  @override
  void initState() {
    super.initState();
    myBook().then(
      (Map<String, dynamic> value) async {
        final bookmarkList = value['bookmark'] as List;
        mapBookmark = await Future.wait(
          bookmarkList.map(
            (e) async {
              final doc = await (e as DocumentReference).get();
              return doc.data();
            },
          ).toList(),
        );
        setState(() {});
      },
    );
  }
```
